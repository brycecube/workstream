<!DOCTYPE html>
<html>
<head>
  <title><%= @page_title %></title>
  <meta http-equiv="content-type" content="text/html;charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <% for @script in @js %>
      <script type="text/javascript" src="<%= @script %>"></script>
  <% end %>
  <% for @src in @css %>
      <link rel="stylesheet" type="text/css" href="<%= @src %>" />
  <% end %>
</head>
<body>
<div class="navbar">
  <div class="navbar-inner">
    <div class="container">
	  <% if @session[:user] == nil %>
	  	<form class="navbar-form pull-right" action="/register" method="get">
		  <button type="submit" class="btn">Register</button>
	  	</form>
	  	<form class="navbar-form pull-right" action="/login" method="post">
		  <input type="text" class="span2" name="email" placeholder="Email" />
		  <input type="password" class="span2" name="password" placeholder="Password" />
		  <button type="submit" class="btn">Sign in</button>
	  	</form>
	  <% else %>
	  	<form class="navbar-form pull-right" action="/logout" method="post">
		  <button type="submit" class="btn">Log out</button>
	  	</form>
	    <span class="pull-right">Welcome, <%=@session[:user].email%></span>
	  <% end %>
      <a class="brand" href="/">
        Workout Tracker
      </a>
      <ul class="nav">
        <% @nav.each() do |item| %>
            <% match = item[:url] == request.path_info %>
            <% item[:child_urls].each() { |url| match = match || request.path_info.match( url ) } %>
            <li<%=(match ? ' class="active"' : '')%>>
              <a href="<%=item[:url]%>"><%=item[:label]%></a>
            </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>
<div class="container-fluid">
    <%= yield %>
  <footer>Copyright &copy;2012 | All rights reserved</footer>
</div>
</body>
</html>

