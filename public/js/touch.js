(function(f){function k(){c=null;if(a.last){a.el.trigger("longTap");a={}}}function j(){d&&clearTimeout(d);h&&clearTimeout(h);i&&clearTimeout(i);c&&clearTimeout(c);d=h=i=c=null;a={}}var a={},d,h,i,c;f(document).ready(function(){var e,g;f(document.body).bind("touchstart",function(b){e=Date.now();g=e-(a.last||e);a.el=f("tagName"in b.touches[0].target?b.touches[0].target:b.touches[0].target.parentNode);d&&clearTimeout(d);a.x1=b.touches[0].pageX;a.y1=b.touches[0].pageY;if(g>0&&g<=250)a.isDoubleTap=true;
a.last=e;c=setTimeout(k,750)}).bind("touchmove",function(b){c&&clearTimeout(c);c=null;a.x2=b.touches[0].pageX;a.y2=b.touches[0].pageY;Math.abs(a.x1-a.x2)>10&&b.preventDefault()}).bind("touchend",function(){c&&clearTimeout(c);c=null;if(a.x2&&Math.abs(a.x1-a.x2)>30||a.y2&&Math.abs(a.y1-a.y2)>30)i=setTimeout(function(){a.el.trigger("swipe");a.el.trigger("swipe"+(Math.abs(a.x1-a.x2)>=Math.abs(a.y1-a.y2)?a.x1-a.x2>0?"Left":"Right":a.y1-a.y2>0?"Up":"Down"));a={}},0);else if("last"in a)h=setTimeout(function(){var b=
f.Event("tap");b.cancelTouch=j;a.el.trigger(b);if(a.isDoubleTap){a.el.trigger("doubleTap");a={}}else d=setTimeout(function(){d=null;a.el.trigger("singleTap");a={}},250)},0)}).bind("touchcancel",j);f(window).bind("scroll",j)});["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){f.fn[e]=function(g){return this.bind(e,g)}})})(Zepto);


